<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="_bitreader_8c" xml:lang="en-US">
<title>bitreader.c File Reference</title>
<indexterm><primary>bitreader.c</primary></indexterm>
<programlisting linenumbering="unnumbered">#include &quot;bitreader.h&quot;<?linebreak?>#include &lt;string.h&gt;<?linebreak?>#include &lt;stdio.h&gt;<?linebreak?>#include &lt;stdlib.h&gt;<?linebreak?>#include &quot;debugmalloc.h&quot;<?linebreak?></programlisting>Include dependency graph for bitreader.c:<para>
    <informalfigure>
        <mediaobject>
            <imageobject>
                <imagedata width="50%" align="center" valign="middle" scalefit="0" fileref="bitreader_8c__incl.png"></imagedata>
            </imageobject>
        </mediaobject>
    </informalfigure>
</para>
<simplesect>
    <title>Macros    </title>
        <itemizedlist>
            <listitem><para>#define <link linkend="_bitreader_8c_1a6b20d41d6252e9871430c242cb1a56e7">BUFFER_SIZE</link>&#160;&#160;&#160;4096</para>
</listitem>
            <listitem><para>#define <link linkend="_bitreader_8c_1a3077cee4d25db022d9076b5575a14809">GZIP_ID1</link>&#160;&#160;&#160;0x1f</para>
</listitem>
            <listitem><para>#define <link linkend="_bitreader_8c_1aa5b870e8cf3ddbbb799871f614eb1cc2">GZIP_ID2</link>&#160;&#160;&#160;0x8b</para>
</listitem>
            <listitem><para>#define <link linkend="_bitreader_8c_1a46bb71d79f4ca0301b1239d8931f1541">GZIP_CM_DEFLATE</link>&#160;&#160;&#160;0x08</para>
</listitem>
            <listitem><para>#define <link linkend="_bitreader_8c_1ad16d3314e1ed1f0124d728efbd474ad4">FTEXT</link>&#160;&#160;&#160;0x01</para>
</listitem>
            <listitem><para>#define <link linkend="_bitreader_8c_1a8469cbeb2f8071938f6d68cd0c58c0f3">FHCRC</link>&#160;&#160;&#160;0x02</para>
</listitem>
            <listitem><para>#define <link linkend="_bitreader_8c_1ad0c5ecb7071bdd157bce2e3b7ee930ad">FEXTRA</link>&#160;&#160;&#160;0x04</para>
</listitem>
            <listitem><para>#define <link linkend="_bitreader_8c_1afd7feb39acd312085566c208e35c2362">FNAME</link>&#160;&#160;&#160;0x08</para>
</listitem>
            <listitem><para>#define <link linkend="_bitreader_8c_1ab1cb41f7a9d2436f79f01a537ba79b71">FCOMMENT</link>&#160;&#160;&#160;0x10</para>
</listitem>
        </itemizedlist>
</simplesect>
<simplesect>
    <title>Functions    </title>
        <itemizedlist>
            <listitem><para>uint32_t <link linkend="_bitreader_8c_1a06bc428e5e0fdf358c4d7aaf14498ce0">read_bits</link> (<link linkend="_struct_b_i_t___r_e_a_d_e_r">BIT_READER</link> *reader, int numBits)</para>

<para>Processes the 10-byte GZIP header and any optional fields. </para>
</listitem>
            <listitem><para>bool <link linkend="_bitreader_8c_1acac2cf5ecbb43c96b44ff0b63b432c46">process_gzip_header</link> (<link linkend="_struct_b_i_t___r_e_a_d_e_r">BIT_READER</link> *reader)</para>
</listitem>
            <listitem><para><link linkend="_struct_b_i_t___r_e_a_d_e_r">BIT_READER</link> * <link linkend="_bitreader_8c_1af813be79ba8b6b387a8dacff1ef72c04">init_bit_reader</link> (const char *filePath)</para>
</listitem>
            <listitem><para>int <link linkend="_bitreader_8c_1a21ed250683802f09cc0375f8dbb5a125">read_bit</link> (<link linkend="_struct_b_i_t___r_e_a_d_e_r">BIT_READER</link> *reader)</para>
</listitem>
            <listitem><para>void <link linkend="_bitreader_8c_1aa8b5fc0a2d13215757372d983e37b336">close_bit_reader</link> (<link linkend="_struct_b_i_t___r_e_a_d_e_r">BIT_READER</link> *reader)</para>
</listitem>
            <listitem><para>uint16_t <link linkend="_bitreader_8c_1ae4fcc275a9937dc610bc057cb9bcc919">peek_bits</link> (<link linkend="_struct_b_i_t___r_e_a_d_e_r">BIT_READER</link> *reader, uint8_t n)</para>
</listitem>
        </itemizedlist>
</simplesect>
<section>
<title>Macro Definition Documentation</title>
<anchor xml:id="_bitreader_8c_1a6b20d41d6252e9871430c242cb1a56e7"/><section>
    <title>BUFFER_SIZE</title>
<indexterm><primary>BUFFER_SIZE</primary><secondary>bitreader.c</secondary></indexterm>
<indexterm><primary>bitreader.c</primary><secondary>BUFFER_SIZE</secondary></indexterm>
<para><computeroutput>#define BUFFER_SIZE&#160;&#160;&#160;4096</computeroutput></para></section>
<anchor xml:id="_bitreader_8c_1ab1cb41f7a9d2436f79f01a537ba79b71"/><section>
    <title>FCOMMENT</title>
<indexterm><primary>FCOMMENT</primary><secondary>bitreader.c</secondary></indexterm>
<indexterm><primary>bitreader.c</primary><secondary>FCOMMENT</secondary></indexterm>
<para><computeroutput>#define FCOMMENT&#160;&#160;&#160;0x10</computeroutput></para></section>
<anchor xml:id="_bitreader_8c_1ad0c5ecb7071bdd157bce2e3b7ee930ad"/><section>
    <title>FEXTRA</title>
<indexterm><primary>FEXTRA</primary><secondary>bitreader.c</secondary></indexterm>
<indexterm><primary>bitreader.c</primary><secondary>FEXTRA</secondary></indexterm>
<para><computeroutput>#define FEXTRA&#160;&#160;&#160;0x04</computeroutput></para></section>
<anchor xml:id="_bitreader_8c_1a8469cbeb2f8071938f6d68cd0c58c0f3"/><section>
    <title>FHCRC</title>
<indexterm><primary>FHCRC</primary><secondary>bitreader.c</secondary></indexterm>
<indexterm><primary>bitreader.c</primary><secondary>FHCRC</secondary></indexterm>
<para><computeroutput>#define FHCRC&#160;&#160;&#160;0x02</computeroutput></para></section>
<anchor xml:id="_bitreader_8c_1afd7feb39acd312085566c208e35c2362"/><section>
    <title>FNAME</title>
<indexterm><primary>FNAME</primary><secondary>bitreader.c</secondary></indexterm>
<indexterm><primary>bitreader.c</primary><secondary>FNAME</secondary></indexterm>
<para><computeroutput>#define FNAME&#160;&#160;&#160;0x08</computeroutput></para></section>
<anchor xml:id="_bitreader_8c_1ad16d3314e1ed1f0124d728efbd474ad4"/><section>
    <title>FTEXT</title>
<indexterm><primary>FTEXT</primary><secondary>bitreader.c</secondary></indexterm>
<indexterm><primary>bitreader.c</primary><secondary>FTEXT</secondary></indexterm>
<para><computeroutput>#define FTEXT&#160;&#160;&#160;0x01</computeroutput></para></section>
<anchor xml:id="_bitreader_8c_1a46bb71d79f4ca0301b1239d8931f1541"/><section>
    <title>GZIP_CM_DEFLATE</title>
<indexterm><primary>GZIP_CM_DEFLATE</primary><secondary>bitreader.c</secondary></indexterm>
<indexterm><primary>bitreader.c</primary><secondary>GZIP_CM_DEFLATE</secondary></indexterm>
<para><computeroutput>#define GZIP_CM_DEFLATE&#160;&#160;&#160;0x08</computeroutput></para></section>
<anchor xml:id="_bitreader_8c_1a3077cee4d25db022d9076b5575a14809"/><section>
    <title>GZIP_ID1</title>
<indexterm><primary>GZIP_ID1</primary><secondary>bitreader.c</secondary></indexterm>
<indexterm><primary>bitreader.c</primary><secondary>GZIP_ID1</secondary></indexterm>
<para><computeroutput>#define GZIP_ID1&#160;&#160;&#160;0x1f</computeroutput></para></section>
<anchor xml:id="_bitreader_8c_1aa5b870e8cf3ddbbb799871f614eb1cc2"/><section>
    <title>GZIP_ID2</title>
<indexterm><primary>GZIP_ID2</primary><secondary>bitreader.c</secondary></indexterm>
<indexterm><primary>bitreader.c</primary><secondary>GZIP_ID2</secondary></indexterm>
<para><computeroutput>#define GZIP_ID2&#160;&#160;&#160;0x8b</computeroutput></para></section>
</section>
<section>
<title>Function Documentation</title>
<anchor xml:id="_bitreader_8c_1aa8b5fc0a2d13215757372d983e37b336"/><section>
    <title>close_bit_reader()</title>
<indexterm><primary>close_bit_reader</primary><secondary>bitreader.c</secondary></indexterm>
<indexterm><primary>bitreader.c</primary><secondary>close_bit_reader</secondary></indexterm>
<para><computeroutput>void close_bit_reader (<link linkend="_struct_b_i_t___r_e_a_d_e_r">BIT_READER</link> * reader)</computeroutput></para>
<para>Closes the file handle and performs cleanup. 
                <formalpara>
                    <title>
Parameters</title>
                    <para>
                    <table frame="all">
                        <tgroup cols="2" align="left" colsep="1" rowsep="1">
                        <colspec colwidth="1*"/>
                        <colspec colwidth="4*"/>
                        <tbody>
                            <row>
<entry>reader</entry><entry>
<para>Pointer to the <link linkend="_struct_b_i_t___r_e_a_d_e_r">BIT_READER</link> structure. </para>
</entry>
                            </row>
                        </tbody>
                        </tgroup>
                    </table>
                    </para>
                </formalpara>
                </para>
</section>
<anchor xml:id="_bitreader_8c_1af813be79ba8b6b387a8dacff1ef72c04"/><section>
    <title>init_bit_reader()</title>
<indexterm><primary>init_bit_reader</primary><secondary>bitreader.c</secondary></indexterm>
<indexterm><primary>bitreader.c</primary><secondary>init_bit_reader</secondary></indexterm>
<para><computeroutput><link linkend="_struct_b_i_t___r_e_a_d_e_r">BIT_READER</link> * init_bit_reader (const char * filePath)</computeroutput></para>
<para>Initializes the <link linkend="_struct_b_i_t___r_e_a_d_e_r">BIT_READER</link> structure. Opens the file and resets the bit-reading state. 
                <formalpara>
                    <title>
Parameters</title>
                    <para>
                    <table frame="all">
                        <tgroup cols="2" align="left" colsep="1" rowsep="1">
                        <colspec colwidth="1*"/>
                        <colspec colwidth="4*"/>
                        <tbody>
                            <row>
<entry>filePath</entry><entry>
<para>Path to the input file. </para>
</entry>
                            </row>
                        </tbody>
                        </tgroup>
                    </table>
                    </para>
                </formalpara>
                <formalpara><title>Returns</title>

<para>0 on success, -1 on failure (e.g., file not found). </para>
</formalpara>
</para>
</section>
<anchor xml:id="_bitreader_8c_1ae4fcc275a9937dc610bc057cb9bcc919"/><section>
    <title>peek_bits()</title>
<indexterm><primary>peek_bits</primary><secondary>bitreader.c</secondary></indexterm>
<indexterm><primary>bitreader.c</primary><secondary>peek_bits</secondary></indexterm>
<para><computeroutput>uint16_t peek_bits (<link linkend="_struct_b_i_t___r_e_a_d_e_r">BIT_READER</link> * reader, uint8_t n)<computeroutput>[extern]</computeroutput></computeroutput></para></section>
<anchor xml:id="_bitreader_8c_1acac2cf5ecbb43c96b44ff0b63b432c46"/><section>
    <title>process_gzip_header()</title>
<indexterm><primary>process_gzip_header</primary><secondary>bitreader.c</secondary></indexterm>
<indexterm><primary>bitreader.c</primary><secondary>process_gzip_header</secondary></indexterm>
<para><computeroutput>bool process_gzip_header (<link linkend="_struct_b_i_t___r_e_a_d_e_r">BIT_READER</link> * reader)</computeroutput></para></section>
<anchor xml:id="_bitreader_8c_1a21ed250683802f09cc0375f8dbb5a125"/><section>
    <title>read_bit()</title>
<indexterm><primary>read_bit</primary><secondary>bitreader.c</secondary></indexterm>
<indexterm><primary>bitreader.c</primary><secondary>read_bit</secondary></indexterm>
<para><computeroutput>int read_bit (<link linkend="_struct_b_i_t___r_e_a_d_e_r">BIT_READER</link> * reader)</computeroutput></para>
<para>Reads a single bit from the stream. Handles reading new bytes from the file when the current byte is exhausted. 
                <formalpara>
                    <title>
Parameters</title>
                    <para>
                    <table frame="all">
                        <tgroup cols="2" align="left" colsep="1" rowsep="1">
                        <colspec colwidth="1*"/>
                        <colspec colwidth="4*"/>
                        <tbody>
                            <row>
<entry>reader</entry><entry>
<para>Pointer to the initialized <link linkend="_struct_b_i_t___r_e_a_d_e_r">BIT_READER</link>. </para>
</entry>
                            </row>
                        </tbody>
                        </tgroup>
                    </table>
                    </para>
                </formalpara>
                <formalpara><title>Returns</title>

<para>The bit value (0 or 1), or -1 if the end of file is reached unexpectedly. </para>
</formalpara>
</para>
</section>
<anchor xml:id="_bitreader_8c_1a06bc428e5e0fdf358c4d7aaf14498ce0"/><section>
    <title>read_bits()</title>
<indexterm><primary>read_bits</primary><secondary>bitreader.c</secondary></indexterm>
<indexterm><primary>bitreader.c</primary><secondary>read_bits</secondary></indexterm>
<para><computeroutput>uint32_t read_bits (<link linkend="_struct_b_i_t___r_e_a_d_e_r">BIT_READER</link> * reader, int numBits)</computeroutput></para><para>

<para>Processes the 10-byte GZIP header and any optional fields. </para>
</para>

<para><itemizedlist>
<listitem>
<para>
                <formalpara>
                    <title>
Parameters</title>
                    <para>
                    <table frame="all">
                        <tgroup cols="2" align="left" colsep="1" rowsep="1">
                        <colspec colwidth="1*"/>
                        <colspec colwidth="4*"/>
                        <tbody>
                            <row>
<entry>reader</entry><entry>
<para>Pointer to the initialized <link linkend="_struct_b_i_t___r_e_a_d_e_r">BIT_READER</link>. </para>
</entry>
                            </row>
                        </tbody>
                        </tgroup>
                    </table>
                    </para>
                </formalpara>
                <formalpara><title>Returns</title>

<para>true if the header is valid and optional fields were processed (or skipped). </para>

<para>false if the file is not a valid GZIP stream or required features are unsupported. </para>
</formalpara>
</para>
</listitem></itemizedlist>
</para>
</section>
</section>
</section>
